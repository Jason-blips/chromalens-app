# åŒºåŸŸé€‰æ‹©åŠŸèƒ½ä¼˜åŒ–æ–‡æ¡£

## ðŸŽ¯ ä¼˜åŒ–ç›®æ ‡

ä¼˜åŒ–å›¾ç‰‡åŒºåŸŸé€‰æ‹©å’Œé¢œè‰²åˆ†æžåŠŸèƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€æ€§èƒ½å’Œè§†è§‰æ•ˆæžœã€‚

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. **åˆ›å»º SelectionOverlay ç»„ä»¶**
- ç‹¬ç«‹çš„åŒºåŸŸé€‰æ‹©è¦†ç›–å±‚ç»„ä»¶
- æ›´å¥½çš„è§†è§‰åé¦ˆå’Œäº¤äº’ä½“éªŒ
- æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºŽç»´æŠ¤

### 2. **è§†è§‰åé¦ˆä¼˜åŒ–**
- **é®ç½©å±‚**: ä½¿ç”¨ `clip-path` å®žçŽ°ç²¾ç¡®çš„é®ç½©æ•ˆæžœ
- **é€‰æ‹©æ¡†**: å¸¦è¾¹æ¡†å’ŒèƒŒæ™¯è‰²çš„é€‰æ‹©æ¡†
- **åŠ¨ç”»æ•ˆæžœ**: é€‰æ‹©æ—¶çš„è„‰å†²åŠ¨ç”»
- **å››ä¸ªè§’ç‚¹**: æ¸…æ™°çš„è§’ç‚¹æ ‡è®°
- **ä¿¡æ¯æ ‡ç­¾**: æ˜¾ç¤ºé€‰æ‹©åŒºåŸŸçš„å°ºå¯¸å’Œç™¾åˆ†æ¯”
- **æ¸…é™¤æŒ‰é’®**: ä¾¿æ·çš„æ¸…é™¤æŒ‰é’®

### 3. **æ€§èƒ½ä¼˜åŒ–**
- **èŠ‚æµå¤„ç†**: é¼ æ ‡ç§»åŠ¨äº‹ä»¶ä½¿ç”¨èŠ‚æµï¼ˆ16msï¼Œçº¦60fpsï¼‰
- **è¾¹ç•Œæ£€æŸ¥**: ç¡®ä¿é€‰æ‹©åŒºåŸŸåœ¨å›¾ç‰‡èŒƒå›´å†…
- **é˜²é‡å¤å¤„ç†**: é˜²æ­¢åœ¨å¤„ç†ä¸­é‡å¤è§¦å‘
- **ä¼˜åŒ–é‡‡æ ·çŽ‡**: å°åŒºåŸŸä½¿ç”¨æ›´é«˜é‡‡æ ·çŽ‡ï¼ˆ20%ï¼‰ï¼Œå¤§åŒºåŸŸä½¿ç”¨æ ‡å‡†é‡‡æ ·çŽ‡ï¼ˆ10%ï¼‰

### 4. **è§¦æ‘¸äº‹ä»¶æ”¯æŒ**
- æ”¯æŒç§»åŠ¨ç«¯è§¦æ‘¸æ“ä½œ
- `onTouchStart` äº‹ä»¶å¤„ç†
- `touchAction: 'none'` é˜²æ­¢é»˜è®¤æ‰‹åŠ¿
- è§¦æ‘¸ç§»åŠ¨å’Œç»“æŸäº‹ä»¶å¤„ç†

### 5. **ç²¾åº¦ä¼˜åŒ–**
- ä½¿ç”¨ `Math.ceil` å’Œ `Math.floor` ç²¾ç¡®è®¡ç®—
- é«˜è´¨é‡å›¾åƒæ¸²æŸ“ï¼ˆ`imageSmoothingQuality: 'high'`ï¼‰
- è¾¹ç•Œçº¦æŸï¼Œé˜²æ­¢é€‰æ‹©åŒºåŸŸè¶…å‡ºå›¾ç‰‡èŒƒå›´

### 6. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
- æœ€å°é€‰æ‹©åŒºåŸŸæç¤ºï¼ˆ10Ã—10åƒç´ ï¼‰
- é€‰æ‹©åŒºåŸŸå¤ªå°æ—¶çš„å‹å¥½æç¤º
- æ¸…é™¤æŒ‰é’®æ˜¾ç¤ºå¿«æ·é”®æç¤º
- ä¿¡æ¯æ ‡ç­¾è‡ªåŠ¨æ˜¾ç¤º/éšè—

### 7. **é”™è¯¯å¤„ç†**
- å®Œå–„çš„ try-catch é”™è¯¯å¤„ç†
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- é˜²æ­¢å› é”™è¯¯å¯¼è‡´åŠŸèƒ½å¤±æ•ˆ

## ðŸŽ¨ è§†è§‰ç‰¹æ€§

### SelectionOverlay ç»„ä»¶ç‰¹æ€§
1. **é®ç½©å±‚**
   - åŠé€æ˜Žé»‘è‰²é®ç½©
   - ç²¾ç¡®çš„ clip-path è£å‰ª
   - å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»

2. **é€‰æ‹©æ¡†**
   - è“è‰²è¾¹æ¡†ï¼ˆ#3b82f6ï¼‰
   - åŠé€æ˜Žè“è‰²èƒŒæ™¯
   - ç™½è‰²å†…è¾¹æ¡†
   - é€‰æ‹©æ—¶çš„è„‰å†²åŠ¨ç”»

3. **è§’ç‚¹æ ‡è®°**
   - å››ä¸ªè§’çš„åœ†å½¢æ ‡è®°
   - è“è‰²èƒŒæ™¯ï¼Œç™½è‰²è¾¹æ¡†
   - é˜´å½±æ•ˆæžœ

4. **ä¿¡æ¯æ ‡ç­¾**
   - æ¸å˜è“è‰²èƒŒæ™¯
   - æ¯›çŽ»ç’ƒæ•ˆæžœï¼ˆbackdrop-filterï¼‰
   - æ˜¾ç¤ºå°ºå¯¸ã€åƒç´ æ•°å’Œç™¾åˆ†æ¯”
   - è‡ªåŠ¨å®šä½å’Œæ˜¾ç¤º

5. **æ¸…é™¤æŒ‰é’®**
   - çº¢è‰²åœ†å½¢æŒ‰é’®
   - æ‚¬åœæ•ˆæžœ
   - æ˜¾ç¤ºå¿«æ·é”®æç¤º

## âš¡ æ€§èƒ½ä¼˜åŒ–ç»†èŠ‚

### 1. èŠ‚æµå¤„ç†
```javascript
const throttledMouseMove = throttle((e) => {
    handleMouseMove(e);
}, 16); // çº¦60fps
```

### 2. è‡ªé€‚åº”é‡‡æ ·çŽ‡
```javascript
const pixelCount = actualWidth * actualHeight;
const sampleRate = pixelCount < 10000 ? 0.2 : 0.1;
// å°åŒºåŸŸä½¿ç”¨æ›´é«˜é‡‡æ ·çŽ‡ï¼Œæé«˜å‡†ç¡®æ€§
```

### 3. é«˜è´¨é‡æ¸²æŸ“
```javascript
ctx.imageSmoothingEnabled = true;
ctx.imageSmoothingQuality = 'high';
```

### 4. è¾¹ç•Œçº¦æŸ
```javascript
const clampedX = Math.max(0, Math.min(x, rect.width - width));
const clampedY = Math.max(0, Math.min(y, rect.height - height));
```

## ðŸ“± ç§»åŠ¨ç«¯æ”¯æŒ

### è§¦æ‘¸äº‹ä»¶
- `onTouchStart`: å¼€å§‹é€‰æ‹©
- `onTouchMove`: æ›´æ–°é€‰æ‹©åŒºåŸŸ
- `onTouchEnd`: å®Œæˆé€‰æ‹©
- `touchAction: 'none'`: é˜²æ­¢é»˜è®¤æ‰‹åŠ¿

## ðŸŽ¯ ä½¿ç”¨ä½“éªŒ

### æ“ä½œæµç¨‹
1. **å¼€å§‹é€‰æ‹©**: åœ¨å›¾ç‰‡ä¸ŠæŒ‰ä¸‹é¼ æ ‡æˆ–è§¦æ‘¸
2. **æ‹–æ‹½é€‰æ‹©**: æ‹–æ‹½é¼ æ ‡æˆ–æ‰‹æŒ‡é€‰æ‹©åŒºåŸŸ
3. **å®žæ—¶åé¦ˆ**: çœ‹åˆ°é€‰æ‹©æ¡†å’Œå°ºå¯¸ä¿¡æ¯
4. **å®Œæˆé€‰æ‹©**: é‡Šæ”¾é¼ æ ‡æˆ–æ‰‹æŒ‡ï¼Œè‡ªåŠ¨æå–é¢œè‰²
5. **æ¸…é™¤é€‰æ‹©**: ç‚¹å‡»æ¸…é™¤æŒ‰é’®æˆ–æŒ‰ Esc é”®

### å¿«æ·é”®
- `Esc`: æ¸…é™¤é€‰æ‹©åŒºåŸŸ

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### åæ ‡è½¬æ¢
- æ˜¾ç¤ºåæ ‡ â†’ å®žé™…å›¾ç‰‡åæ ‡
- è€ƒè™‘å›¾ç‰‡ç¼©æ”¾æ¯”ä¾‹
- ç²¾ç¡®çš„åƒç´ çº§è®¡ç®—

### Canvas å¤„ç†
- åˆ›å»ºä¸´æ—¶ Canvas
- é«˜è´¨é‡å›¾åƒæ¸²æŸ“
- ç²¾ç¡®çš„åŒºåŸŸè£å‰ª

### é¢œè‰²æå–
- é’ˆå¯¹é€‰æ‹©åŒºåŸŸä¼˜åŒ–
- è‡ªé€‚åº”é‡‡æ ·çŽ‡
- å¿«é€Ÿå“åº”ï¼ˆ<150msï¼‰

## ðŸ“Š ä¼˜åŒ–æ•ˆæžœ

### æ€§èƒ½æå‡
- âœ… é¼ æ ‡ç§»åŠ¨æµç•…ï¼ˆ60fpsï¼‰
- âœ… é€‰æ‹©å“åº”å¿«é€Ÿ
- âœ… é¢œè‰²æå–ä¼˜åŒ–

### ç”¨æˆ·ä½“éªŒæå‡
- âœ… è§†è§‰åé¦ˆæ›´æ¸…æ™°
- âœ… æ“ä½œæ›´ç›´è§‚
- âœ… ç§»åŠ¨ç«¯æ”¯æŒ
- âœ… é”™è¯¯å¤„ç†å®Œå–„

### ä»£ç è´¨é‡æå‡
- âœ… ç»„ä»¶åŒ–è®¾è®¡
- âœ… ä»£ç å¤ç”¨æ€§é«˜
- âœ… æ˜“äºŽç»´æŠ¤

## ðŸš€ æœªæ¥ä¼˜åŒ–æ–¹å‘

1. **åŒºåŸŸè°ƒæ•´**: æ”¯æŒæ‹–æ‹½è°ƒæ•´é€‰æ‹©åŒºåŸŸå¤§å°
2. **å¤šåŒºåŸŸé€‰æ‹©**: æ”¯æŒé€‰æ‹©å¤šä¸ªåŒºåŸŸ
3. **åŒºåŸŸä¿å­˜**: ä¿å­˜å’Œæ¢å¤é€‰æ‹©åŒºåŸŸ
4. **å®žæ—¶é¢„è§ˆ**: é€‰æ‹©æ—¶å®žæ—¶æ˜¾ç¤ºåŒºåŸŸé¢œè‰²
5. **æ‰‹åŠ¿æ”¯æŒ**: æ›´å¤šç§»åŠ¨ç«¯æ‰‹åŠ¿æ“ä½œ
